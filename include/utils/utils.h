#pragma once

#include <string>

#include "../analyzer.h"

namespace analyzer::utils {

    /**
     * @brief Приводит строку к нижнему регистру.
     *
     * Используется на этапе предобработки текста
     * для нормализации входных данных.
     *
     * @param s Входная строка.
     * @return Строка, приведённая к нижнему регистру.
     */
    std::string to_lower(std::string s);

    /**
     * @brief Нормализует текстовое описание товара.
     *
     * Выполняет:
     * - приведение к нижнему регистру;
     * - замену небуквенно-цифровых символов на пробелы;
     * - удаление лишних пробелов.
     *
     * Используется для повышения качества
     * сравнения текстов.
     *
     * @param s Исходная строка.
     * @return Нормализованная строка.
     */
    std::string normalize(std::string s);

    /**
     * @brief Разбивает строку на множество токенов.
     *
     * Строка разделяется по пробелам,
     * каждый токен соответствует отдельному слову.
     *
     * @param s Входная строка.
     * @return Множество уникальных токенов.
     */
    TokenSet tokenize(const std::string &s);

    /**
     * @brief Вычисляет коэффициент Жаккара для двух множеств токенов.
     *
     * Коэффициент Жаккара определяется как отношение
     * мощности пересечения множеств к мощности их объединения.
     *
     * @param a Первое множество токенов.
     * @param b Второе множество токенов.
     * @return Значение схожести в диапазоне [0, 1].
     */
    double jaccard(const TokenSet &a, const TokenSet &b);

} // analyzer::utils